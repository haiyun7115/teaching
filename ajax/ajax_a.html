<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>ajax</title>
<style>
.odiv{
	width:500px;
	height:1000px;
	margin:0 auto;
}


</style>
</head>
<body>
<div class='odiv'>
	<table>
		<tr>
			<td>
				<input type='text' name='username' />
			</td>			
		</tr>
		<tr>
			<td>
				<input type='password' name='password' />
			</td>			
		</tr>
		<tr>
			<td>
				<button name='btn'>登录</button>
			</td>			
		</tr>
	</table>
</div>

<script src='common.js'></script>
<script src="http://192.168.42.76:3000/users/liveall?callback=fn" async="true"></script>
<script>
	function _2021936(msg){
		console.log(msg)
	}
	
	var username = document.querySelector('[name=username]')
	var password = document.querySelector('[name=password]')
	var btn = document.querySelector('[name=btn]')
	
	btn.onclick = function(){
		ajax('txt.json',function(msg){
			var flag = false;
			var element;
			for(var i=0;i<msg.length;i++){
				element = msg[i];
				if(element.username===username.value&&element.password==password.value){
					flag = true;
					break;
				}
			}
			if(flag){
				alert('登录成功！');
			}else{
				alert('登录失败！');
			}
		});
	}
	
	// ajax({
	// 	url : 'http://192.168.41.110:3000/users/headline',
	// 	callback : function(msg){
	// 		console.log(msg);
	// 	}
	// })
	function getFetch(url){
		fetch(url).then(res => res.json()).then(data => {
			console.log(data)
		})


	}
//article_choice
	//getFetch('http://192.168.41.110:3000/users/headline')
	getFetch('http://192.168.41.110:3000/users/article_choice')
	
</script>













</body>
</html>

