<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>天气</title>
<style>
.odiv{
	width:800px;
	margin:0 auto;
	overflow:hidden;
}
.on{
	color:red;
}

</style>
</head>
<body>
<div class='odiv'>
	<button name='tap_a' url='sort' class='on'>最佳城市</button>
	<button name='tap_b' url='sortII'>最差城市</button>
	<div class='aqi'>
		<table>
			
			
		</table>
	</div>
</div>
<script src='common.js'></script>
<script>
	var btns = _('button');
	var odiv = $('.odiv');
	var arr = ['data/sort.json','data/sortII.json'];
	var _url;
	
	for(var i=0;i<btns.length;i++){
		btns[i].onclick = function(){
			$('button.on').classList.remove('on');
			this.classList.add('on')
			_url='data/'+this.getAttribute('url')+'.json'
			getData(_url);
		}
	}
	/*
	 * @描述 获取数据
	 * @函数 getData
	 * @参数 data 数据
	*/
	function getData(url){
		var table = $('.aqi table');
		table.innerHTML = '';
		var str = `<tr>
					<th>排名</th>
					<th>城市</th>
					<th>AQI</th>
				</tr>`;
		var arr = []
		arr.push(str)
		ajax(url,function(msg){
			var data = msg.data;
			for(var i=0;i<data.length;i++){
				arr.push('<tr>'+
					'<td>'+(i+1)+'</td>'+
					'<td>'+data[i].provcn+data[i].namecn+'</td>'+
					'<td>'+data[i].AQI+'</td>'
				+'</tr>')
			}
			table.innerHTML = arr.join('');
		})
	}
	
	//getData(arr[0]);
	//192.168.34.7
	var host = '192.168.40.60'
	ajax('http://'+host+':3000/users/entertainment',function(msg){
		console.log(msg)
	})
	//auto_car
	ajax('http://'+host+':3000/users/car',function(msg){
		//console.log(msg)
	})
	ajax('http://'+host+':3000/users/auto_car',function(msg){
		//console.log(msg)
	})
	//duanzi
	ajax('http://'+host+':3000/users/duanzi',function(msg){
		//console.log(msg)
	})
	
	ajax('http://'+host+':3000/users/shost',function(msg){
		//console.log(msg)
	})
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	//委托的方式
	/*odiv.onclick = function(e){
		var target = e.target;
		if(target.nodeName === 'BUTTON'){
			$('button.on').classList.remove('on');
			target.classList.add('on')
		}
	}*/
	
	
</script>













</body>
</html>

